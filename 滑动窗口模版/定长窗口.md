# LeetCode 643. 子数组最大平均数 I — 滑动窗口详解

## 题目描述
给你一个由 `n` 个元素组成的整数数组 `nums` 和一个整数 `k`。  
请你找出**平均数最大**且**长度为 k** 的连续子数组，并输出该最大平均数。  
任何误差小于 `1e-5` 的答案都将被视为正确答案。

> **示例**  
> 输入：`nums = [1,12,-5,-6,50,3]`, `k = 4`  
> 输出：`12.75000`  
> 解释：最大平均数对应子数组 `[12, -5, -6, 50]`，平均值为 `(12 -5 -6 + 50) / 4 = 51 / 4 = 12.75`

---

## 核心思路：固定长度滑动窗口

本题本质是：**在数组中找长度为 `k` 的连续子数组，使其元素和最大**（因为平均值 = 和 / k，k 固定）。

使用滑动窗口技巧，只需一次遍历：
- 维护一个长度为 `k` 的窗口
- 遍历时加入新元素（右边界）
- 窗口超长时移除最左元素（左边界）
- 窗口达到长度 `k` 时，更新最大和

时间复杂度：`O(n)`，空间复杂度：`O(1)`

模版1

class Solution:
    def findMaxAverage(self, nums: List[int], k: int) -> float:
        l = len(nums)
        ans = -float("inf")
        total = 0
        for i in range(l):
            total += nums[i]
            if i >= k:
                total -= nums[i-k]
            if i >= k - 1:
                ans = max(ans,total)       
        return ans / k

注意 
if i >= k 的移除操作必须在 if i >= k - 1 更新之前
否则当 i >= k 时，total 会包含 k+1 个元素，导致答案错误


模版2
class Solution:
    def findMaxAverage(self, nums: List[int], k: int) -> float:
        l = len(nums)
        ans = -float("inf")
        total = 0
        for i in range(l):
            total += nums[i]
            if i < k - 1:
                continue
            ans = max(ans,total)
            total -= nums[i-k+1]
        return ans / k

遍历到k-2的索引
然后再把k-1的加上 然后统计一下ans 这个时候是刚好达到窗口总数的，再减掉最左边的
个人更喜欢模版2



